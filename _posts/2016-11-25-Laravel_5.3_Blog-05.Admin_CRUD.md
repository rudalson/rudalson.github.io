---
layout: post
title:  "Laravel 5.3 Blog System - 04 Admin Dashboard"
categories: php
tags: php laravel blog-system
---
[Laravel 5 Blog System : CRUD on Admin Panel Backend Services](http://www.hc-kr.com/2016/11/laravel-5-blog-system-crud-on-admin-panel.html) 정리

# Bootstrap 적용
[Dashboard template](http://getbootstrap.com/examples/dashboard/) 의 소스를 구해서 적용해본다.

## Admin PostController

`Admin dashboard` 에서 사용할 `PostController`를 별도로 만든다. 기존의 `PostController`와 이름이 같기 때문에 `Auth` 디렉토리 밑으로 생성한다.

```bash
php artisan make:controller Auth/PostController --resource
```

#### App/Http/Controllers/Auth/PostController
```php
use App\Post;
use App\User;

class PostController extends Controller
{
    public function index(Request $request)
    {
        $search = $request->get('search');
        $posts = Post::where('title', 'like', '%'.$search.'%')
            ->where('active', 1)
            ->orderBy('created_at')
            ->paginate(3);
        return view('admin/posts/allposts')->withPosts($posts);
    }
}
```

#### routes/web.php
```php
Route::group(['middleware' => ['auth']], function() {
    ...
    Route::resource('admin/posts', 'Auth\PostController');   // 추가
    Route::get('admin/posts/allposts', 'Auth\PostController@index');    // 추가
});
```

#### resources/views/admin/posts/allposts.blade.php
{% highlight html%}{% raw %}
@extends('layouts.dashbord')

@section('content')
    <h2 class="sub-header">All Posts</h2>
    <div class="row">
        <div class="col-md-9">
            <a href="{{ url('admin/posts/new-post')}}" class="btn btn-primary btn-sm">Add New Post</a>
        </div>
        <div class="col-md-3">
            {!! Form::open(['method'=>'GET','url'=>'admin/posts/','class'=>'navbar-form navbar-left','role'=>'search']) !!}
            <div class="input-group custom-search-form">
                <input type="text" name="search" class="form-control" placeholder="Search ....">
                <span class="input-group-btn">
                <button type="submit" class="btn btn-default-sm">
                <i class="fa fa-search"></i>
                </button>
                </span>
            </div>
            {!! Form::close() !!}
        </div>
    </div>
@endsection
{% endraw %}{% endhighlight %}
