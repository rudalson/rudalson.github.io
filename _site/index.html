<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>Sci blog | Jekyll theme</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link href="/css/simple-sidebar.css" rel="stylesheet">
	<link href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/css/style.css" rel="stylesheet">

    <!-- Fonts -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Codystar' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Schoolbell' rel='stylesheet' type='text/css'>
	
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


  <body>
<div id="wrapper">
    <!-- Navigation -->

    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="http://sciblog.yourfreebies.org/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">Sci Blog</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

	
    <!-- Page Content -->
    <div class="container">

        <div class="row">

            <!-- Blog Post Content Column -->
            <div class="col-lg-8">
                <!-- Blog Post -->
                	<div class="post-list" style="list-style-type: none;">
						 	
							<h2>
								<img class="title-image" src="/img/dna.png"/>
								<a class="post-link" href="/jekyll/update/2016/08/16/Torvalds-better-code.html">토발즈의 더 좋은 코드</a>
							</h2>
							<div class="author" style="margin-top: -10px;">Posted by
								<i class="fa fa-user"></i><a href="http://www.airrayagroup.com/"> </a>
								<span class="post-meta"><i class="fa fa-calendar"></i> Aug 16, 2016</span>
							</div>
							<div class="excerpt"><p>TED의 <a href="https://www.ted.com/talks/linus_torvalds_the_mind_behind_linux?language=ko#t-17586">리누스 토발즈의 기본 철학</a>편에서 보면</p>

<p>토발즈가 같이 작업하고픈 개발자에 대해 간략히 설명하면서
Singly-List를 구현하는 코드를 보여준다.</p>

<p>자신이 생각할 때 <code class="highlighter-rouge">좋은 코드</code>와 <code class="highlighter-rouge">나쁜 코드</code>에 대해 보여준다.</p>

<p>개인적으로 이런 코드는 완전히 모른다고 하기에도 할 수 없지만 안다고도 할 수 없는게
실개발에서는 잘 나오지가 않는다.</p>

<p>꾸준히 적용해보려 노력해보는 수 밖에 없겠다.</p>

<p>일반적인 코드</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">remove_list_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
<span class="p">{</span>
	<span class="n">prev</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
	<span class="n">walk</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
	
	<span class="c1">// Walk the list
</span>	<span class="k">while</span> <span class="p">(</span><span class="n">walk</span> <span class="o">!=</span> <span class="n">entry</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">prev</span> <span class="o">=</span> <span class="n">walk</span><span class="p">;</span>
		<span class="n">walk</span> <span class="o">=</span> <span class="n">walk</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="c1">// Remove the entry by updating the
</span>	<span class="c1">// head or the previous entry
</span>	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">prev</span><span class="p">)</span>
		<span class="n">head</span> <span class="o">=</span> <span class="n">entry</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
	<span class="k">else</span>
		<span class="n">prev</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">entry</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>더 나은 코드</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">remove_list_entry</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
<span class="p">{</span>
	<span class="c1">// The "indirect" pointer points to the
</span>	<span class="c1">// *address* of the thing we'll update
</span>	
	<span class="n">indirect</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">head</span><span class="p">;</span>
	
	<span class="c1">// Walk the list, looking for the thing that
</span>	<span class="c1">// points to the entry we want to remove_list_entry
</span>	<span class="k">while</span> <span class="p">((</span><span class="o">*</span><span class="n">indirect</span><span class="p">)</span> <span class="o">!=</span> <span class="n">entry</span><span class="p">)</span>
		<span class="n">indirect</span> <span class="o">=</span> <span class="o">&amp;</span><span class="p">(</span><span class="o">*</span><span class="n">indirect</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
	
	<span class="c1">// .. and just remove it
</span>	<span class="o">*</span><span class="n">indirect</span> <span class="o">=</span> <span class="n">entry</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

</div>
							<div class="readmore" style="float: left;">
								
									<a href="/jekyll/update/2016/08/16/Torvalds-better-code.html">Read more</a>
								
							</div>								
					</div>
					<hr>
						<div class="post-list" style="list-style-type: none;">			
							 	
							<h2>
								<img class="title-image" src="/img/dna.png"/>
								<a class="post-link" href="/jekyll/update/2015/05/27/Short-Circuit-Evaluation.html">Short-Circuit Evaluation에 대해서</a>
							</h2>
							<div class="author" style="margin-top: -10px;">Posted by
								<i class="fa fa-user"></i><a href="http://www.airrayagroup.com/"> </a>
								<span class="post-meta"><i class="fa fa-calendar"></i> May 27, 2015</span>
							</div>
							<div class="excerpt"><p>Short-Circuit Evaluation 은 <code class="highlighter-rouge">&amp;&amp;</code>이나 <code class="highlighter-rouge">||</code> 에서 첫번째 argument 에서 조건의 결과값에서 이미 전체 결과값이 판단되었을 경우 첫번째로만 수행하는 것을 말한다.</p>

<p>예를 들어,</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">BOOL</span> <span class="nf">condition1</span><span class="p">(</span><span class="kt">int</span> <span class="n">pValue</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"condition1() has been executed</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">pValue</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">BOOL</span> <span class="nf">condition2</span><span class="p">(</span><span class="kt">int</span> <span class="n">pValue</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"condition2() has been executed</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="o">==</span> <span class="n">pValue</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">count1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">count2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">condition1</span><span class="p">(</span><span class="n">count1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">condition2</span><span class="p">(</span><span class="n">count2</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"&amp;&amp; test</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">count1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">condition1</span><span class="p">(</span><span class="n">count1</span><span class="p">)</span> <span class="o">||</span> <span class="n">condition2</span><span class="p">(</span><span class="n">count2</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">"|| test</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p>첫번째 <code class="highlighter-rouge">&amp;&amp;</code> 연산에서는 condition1 이 false 이므로 condition2() 까지는 수행 시키지 않는다.
두번째 <code class="highlighter-rouge">||</code> 연산에서는 condition1 이 true 이므로 condition2() 까지는 수행 시키지 않는다.</p>

<p>여기까지만 보면 그렇구나 싶긴 한데 골치 아픈건 다음의 경우이다.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="k">static</span> <span class="kt">void</span> <span class="o">*</span><span class="nf">cache_alloc_refill</span><span class="p">(</span><span class="k">struct</span> <span class="n">kmem_cache</span> <span class="o">*</span><span class="n">cachep</span><span class="p">,</span> <span class="n">gfp_t</span> <span class="n">flags</span><span class="p">)</span>
<span class="p">{</span>
<span class="p">...</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">slabp</span><span class="o">-&gt;</span><span class="n">inuse</span> <span class="o">&lt;</span> <span class="n">cachep</span><span class="o">-&gt;</span><span class="n">num</span> <span class="o">&amp;&amp;</span> <span class="n">batchcount</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">STATS_INC_ALLOCED</span><span class="p">(</span><span class="n">cachep</span><span class="p">);</span>
        <span class="n">STATS_INC_ACTIVE</span><span class="p">(</span><span class="n">cachep</span><span class="p">);</span>
        <span class="n">STATS_SET_HIGH</span><span class="p">(</span><span class="n">cachep</span><span class="p">);</span>

        <span class="n">ac</span><span class="o">-&gt;</span><span class="n">entry</span><span class="p">[</span><span class="n">ac</span><span class="o">-&gt;</span><span class="n">avail</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="n">slab_get_obj</span><span class="p">(</span><span class="n">cachep</span><span class="p">,</span> <span class="n">slabp</span><span class="p">,</span>
				    <span class="n">node</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">check_slabp</span><span class="p">(</span><span class="n">cachep</span><span class="p">,</span> <span class="n">slabp</span><span class="p">);</span>
<span class="p">....</span>
<span class="p">}</span></code></pre></figure>

<p>linux-2.6.24의 커널 코드 중 일부이다.
저기 while 문 안의 경우를 보면 &amp;&amp; 연산자는 충분히 Short-Circuit Evaluation 를 할 수 있으며 따라서 2번째 조건인 batchcount–를 수행하지 않을 수도 있다.
물론 리눅스 커널 코드야 저런경우까지 고려해서 작성되었겠지만 Short-Circuit Evaluation을 모르고 막쓰다가 2번째 조건에 뭔가 연산을 일으키지 못한다면 흐름을 이해하지 못하게 될 것이다.</p>

<p>정 헷갈리면 나이브하게 다 풀어서 해야 한다.</p>
</div>
							<div class="readmore" style="float: left;">
								
									<a href="/jekyll/update/2015/05/27/Short-Circuit-Evaluation.html">Read more</a>
								
							</div>								
					</div>
					<hr>
						<div class="post-list" style="list-style-type: none;">			
							 
						</div>
					<!-- Pagination links -->
				<span class='st_sharethis' displayText='ShareThis'></span>
				<span class='st_facebook' displayText='Facebook'></span>
				<span class='st_twitter' displayText='Tweet'></span>
				<span class='st_linkedin' displayText='LinkedIn'></span>
				<span class='st_pinterest' displayText='Pinterest'></span>
				<span class='st_email' displayText='Email'></span>
					<!-- Pagination links -->
					<div class="pagination">
					  <ul>
						
						  <li><span class="disabled">Previous</span></li>
						

						
						  <li><span class="active">1</span></li>
						

						

						
						  <li><span class="disabled">Next</span></li>
						
					  </ul>
					</div>
            </div>

            <!-- Widget -->
            <div class="col-md-4">

                <!-- Blog Search -->
                <div class="well">
                    <h4>Search</h4>
                    <div class="input-group">
					<form action="http://www.google.com" id="cse-search-box">
					  <div>
					    <input type="hidden" name="cx" value="" />
					    <input type="hidden" name="ie" value="UTF-8" />
					    <input type="text" name="q" size="20" />
					    <input type="submit" name="sa" value="Search" />
					  </div>
					</form>
					<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
				</div>
            </div>
                <!-- Blog Categories -->
                <div class="well">
                    <h4>Blog Categories</h4>
                    <div class="row">
                        <div class="col-lg-6">
								
								
								
								
									<a class="bold" href="/category/jekyll">
										jekyll (2)
									</a>
                        </div>
                        <div class="col-lg-6">
                        	
								
								
								
									<a class="bold" href="/category/update">
										update (2)
									</a>
                        </div>
                        <div class="col-lg-6">
                        	
                        </div>
                    </div>
                    <!-- /.row -->
                </div>
                <!-- end -->

                <!-- Recents post -->
                <div class="well">
                	<h4>Recent posts</h4>
                		<ul class="posts" span="recent">  
							  
							   <li>  
								   <span>16 Aug 2016</span>
								   <a href="/jekyll/update/2016/08/16/Torvalds-better-code.html">  
								   토발즈의 더 좋은 코드</a>  
							   </li>  
							  
							   <li>  
								   <span>27 May 2015</span>
								   <a href="/jekyll/update/2015/05/27/Short-Circuit-Evaluation.html">  
								   Short-Circuit Evaluation에 대해서</a>  
							   </li>  
							  
						</ul>
                </div>
                <!-- tags widget -->
                <div class="well">
                    <h4>Tags</h4>
                        <ul>
                            
                        </ul>
                </div>
                <!-- author widget -->
                <div class="well">
                    <h4>This blog is maintained by <a href="http://webdesign.airrayagroup.com/">AIRRAYA</a></h4>
                    <p>Get in touch with us at airrayagroup@gmail.com</p>
					<ul class="list-inline">
                            <li>
								<a href="https://www.facebook.com/airrayagroup/">
									<span class="fa-stack fa-2x">
									  <i class="fa fa-circle fa-stack-2x"></i>
									  <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
									</span>
								</a>
                            </li>
                            <li>
								<a href="http://webdesign.airrayagroup.com">
									<span class="fa-stack fa-2x">
									  <i class="fa fa-circle fa-stack-2x"></i>
									  <i class="fa fa-globe fa-stack-1x fa-inverse"></i>
									</span>
								</a>
                            </li>
                            <li>
								<a href="mailto:airrayagroup@gmail.com">
									<span class="fa-stack fa-2x">
									  <i class="fa fa-circle fa-stack-2x"></i>
									  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
									</span>
								</a>
                            </li>
                            <li>
								<a href="https://bitbucket.org/airrayagroup/">
									<span class="fa-stack fa-2x">
									  <i class="fa fa-circle fa-stack-2x"></i>
									  <i class="fa fa-bitbucket fa-stack-1x fa-inverse"></i>
									</span>
								</a>
                            </li>
                    </ul>
                </div>
				 <!-- subscribe -->
                <div class="well">
					<!-- Begin MailChimp Signup Form -->
					<div id="mc_embed_signup">
					<form action="http://maplelearning.us1.list-manage.com/subscribe?u=47d56ac42a95b4295600c0e64&id=5f9ede27c9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
						<div id="mc_embed_signup_scroll">
						<h2>Subscribe to our mailing list</h2>
					<div class="indicates-required"><span class="asterisk">*</span> indicates required</div>
					<div class="mc-field-group">
						<label for="mce-EMAIL">Email Address  <span class="asterisk">*</span>
					</label>
						<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL">
					</div>
					<div class="mc-field-group">
						<label for="mce-FNAME">First Name </label>
						<input type="text" value="" name="FNAME" class="" id="mce-FNAME">
					</div>
					<div class="mc-field-group">
						<label for="mce-LNAME">Last Name </label>
						<input type="text" value="" name="LNAME" class="" id="mce-LNAME">
					</div>
						<div id="mce-responses" class="clear">
							<div class="response" id="mce-error-response" style="display:none"></div>
							<div class="response" id="mce-success-response" style="display:none"></div>
						</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
						<div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_47d56ac42a95b4295600c0e64_5f9ede27c9" tabindex="-1" value=""></div>
						<div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
						</div>
					</form>
					</div>

					<!--End mc_embed_signup-->
				</div>

            </div>
        </div>
        <!-- /.row -->
       <hr>
        <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2016 Sci Blog<p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="http://webdesign.airrayagroup.com/">Airraya Group Web Design</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
</div>
  </body>
</html>
